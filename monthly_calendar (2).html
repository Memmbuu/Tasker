<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Monthly Checklist Calendar</title>
<style>
:root{
--bg:#0b0b0b;--card:#101010;--muted:#9e9e9e;--line:#2a2a2a;--accent:#e6e6e6;--glass:rgba(255,255,255,0.03)
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;color:var(--accent);background:linear-gradient(180deg,var(--bg),#050505)}
.wrap{max-width:1100px;margin:24px auto;padding:16px;display:grid;grid-template-columns:1fr;gap:14px}
@media(min-width:820px){.wrap{grid-template-columns:300px 1fr}}
.card{background:linear-gradient(180deg,var(--card),#0b0b0b);border-radius:14px;padding:14px;border:1px solid var(--line)}
.sidebar{display:flex;flex-direction:column;gap:12px}
h1{margin:0;font-size:20px}.sub{font-size:12px;color:var(--muted)}
.field{display:flex;flex-direction:column;gap:6px}
label{font-size:12px;color:var(--muted)}
.input,select{background:#0b0b0b;border:1px solid var(--line);border-radius:8px;color:var(--accent);padding:8px;font-size:14px}
.btn{background:var(--glass);border:1px solid var(--line);border-radius:8px;color:var(--accent);padding:8px;font-size:13px;cursor:pointer}
.btn.full{width:100%}
.task-list{display:flex;flex-direction:column;gap:6px}
.task-item{display:flex;justify-content:space-between;align-items:center;background:#0b0b0b;border:1px solid var(--line);border-radius:8px;padding:6px 8px;font-size:13px}
.task-item.active{border-color:#eee}
.stats{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.stat{background:#0d0d0d;border:1px solid var(--line);border-radius:10px;padding:8px;text-align:center}
.big{font-size:18px;font-weight:700}
.small{font-size:12px;color:var(--muted)}
.month-row{display:flex;justify-content:space-between;margin-bottom:10px}
.grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
.weekday{font-size:12px;text-align:center;color:var(--muted)}
.day{min-height:70px;border-radius:10px;background:linear-gradient(180deg,transparent,var(--glass));padding:8px;cursor:pointer;border:1px solid rgba(255,255,255,0.03);display:flex;flex-direction:column;justify-content:space-between}
.day .num{font-weight:600}
.day .note{font-size:11px;color:var(--muted)}
.day.done{background:#0e0e0e;border-color:#3a3a3a}
.day.done::after{content:'âœ“';position:absolute;right:6px;top:6px}
.day.missed .num{text-decoration:line-through;color:var(--muted)}
.empty{border:none;background:transparent}
footer{margin-top:8px;font-size:12px;color:var(--muted);display:flex;justify-content:space-between}
</style>
</head>
<body>
<div class="wrap">

<aside class="card sidebar">
<h1>Account</h1>
<div class="field"><label>Your name</label><input id="username" class="input" placeholder="Name"></div>
<button id="saveUser" class="btn full">Save name</button>

<div class="field"><label>Add new task</label><input id="newTask" class="input" placeholder="e.g. Workout"></div>
<button id="addTask" class="btn full">Add task</button>

<div class="field"><label>Switch task</label><select id="taskSelect"></select></div>

<div class="field"><label>Switch month</label><select id="monthSelect"></select></div>

<div class="task-list" id="taskList"></div>

<div class="stats">
<div class="stat"><div class="big" id="done">0</div><div class="small">Done</div></div>
<div class="stat"><div class="big" id="missed">0</div><div class="small">Missed</div></div>
<div class="stat"><div class="big" id="total">0</div><div class="small">Days</div></div>
<div class="stat"><div class="big" id="rate">0%</div><div class="small">Success</div></div>
</div>

<button id="resetMonth" class="btn full">Reset month</button>
</aside>

<main class="card">
<div class="month-row"><div id="monthLabel"></div><div id="status" class="sub"></div></div>
<div class="grid" id="weekdays"></div>
<div class="grid" id="calendar"></div>
<footer><div>Tap day to mark done</div><div>Local only</div></footer>
</main>

</div>

<script>
const PROFILE='multi-profile';const DATA='multi-data';
let profile=JSON.parse(localStorage.getItem(PROFILE)||'{}');
let data=JSON.parse(localStorage.getItem(DATA)||'{}');

const today=new Date();
const y=today.getFullYear(),m=today.getMonth();
let monthKey=y+'-'+String(m+1).padStart(2,'0');
if(!data[monthKey])data[monthKey]={};

const user=document.getElementById('username');
const newTask=document.getElementById('newTask');
const taskSelect=document.getElementById('taskSelect');
const taskList=document.getElementById('taskList');
const monthSelect=document.getElementById('monthSelect');

if(profile.name)user.value=profile.name;
if(!profile.tasks)profile.tasks=[];
if(!profile.active)profile.active=null;

function save(){localStorage.setItem(PROFILE,JSON.stringify(profile));localStorage.setItem(DATA,JSON.stringify(data));}

document.getElementById('saveUser').onclick=()=>{profile.name=user.value||'User';save()};

document.getElementById('addTask').onclick=()=>{
if(!newTask.value)return;
profile.tasks.push(newTask.value);
profile.active=newTask.value;
newTask.value='';
save();loadTasks();render();
};

function loadTasks(){
taskSelect.innerHTML='';
profile.tasks.forEach(t=>{
const op=document.createElement('option');op.textContent=t;op.value=t;taskSelect.appendChild(op);
});
if(profile.active)taskSelect.value=profile.active;
}

taskSelect.onchange=()=>{profile.active=taskSelect.value;save();render()};

monthSelect.onchange=()=>{monthKey=monthSelect.value;if(!data[monthKey])data[monthKey]={};render()};

function tasksUI(){
taskList.innerHTML='';
profile.tasks.forEach(t=>{
const d=document.createElement('div');
d.className='task-item'+(t===profile.active?' active':'');
d.textContent=t;d.onclick=()=>{profile.active=t;taskSelect.value=t;save();render()};
taskList.appendChild(d);
});
}

function setupWeekdays(){
const wEl=document.getElementById('weekdays');wEl.innerHTML='';
for(let i=0;i<7;i++){
const d=new Date(2024,0,7+i);
const el=document.createElement('div');el.className='weekday';el.textContent=d.toLocaleDateString(undefined,{weekday:'short'});
wEl.appendChild(el);
}}

function buildMonthList(){
monthSelect.innerHTML='';
Object.keys(data).sort().forEach(k=>{
const op=document.createElement('option');op.value=k;
const parts=k.split('-');
op.textContent=new Date(parts[0],parts[1]-1).toLocaleString(undefined,{month:'long',year:'numeric'});
monthSelect.appendChild(op);
});
monthSelect.value=monthKey;
}

function render(){
buildMonthList();
if(!profile.active){document.getElementById('status').textContent='Add a task';return;}
const key=profile.active;
if(!data[monthKey][key])data[monthKey][key]={};

const grid=document.getElementById('calendar');grid.innerHTML='';
const start=new Date(y,m,1).getDay();
const days=new Date(y,m+1,0).getDate();

for(let i=0;i<start;i++){const e=document.createElement('div');e.className='empty';grid.appendChild(e);}

for(let d=1;d<=days;d++){
const date=new Date(y,m,d);
const cell=document.createElement('div');cell.className='day';
const num=document.createElement('div');num.className='num';num.textContent=d;
const note=document.createElement('div');note.className='note';note.textContent=date.toLocaleDateString(undefined,{weekday:'long'});
cell.append(num,note);

if(data[monthKey][key][d])cell.classList.add('done');
else if(date<new Date().setHours(0,0,0,0))cell.classList.add('missed');

cell.onclick=()=>{
if(cell.classList.contains('done')){cell.classList.remove('done');if(date<new Date())cell.classList.add('missed');delete data[monthKey][key][d];}
else{cell.classList.add('done');cell.classList.remove('missed');data[monthKey][key][d]=true;}

save();stats();};

grid.appendChild(cell);
}
stats();tasksUI();updateMonthLabel();
}

function stats(){
const key=profile.active;if(!key)return;
const total=new Date(y,m+1,0).getDate();
const done=Object.keys(data[monthKey][key]||{}).length;
const miss=total-done;
document.getElementById('done').textContent=done;
document.getElementById('missed').textContent=miss;
document.getElementById('total').textContent=total;
document.getElementById('rate').textContent=Math.round((done/total)*100)+'%';
document.getElementById('status').textContent=key+'  '+done+' / '+total;
}

document.getElementById('resetMonth').onclick=()=>{if(confirm('Reset all tasks for this month?')){data[monthKey]={};save();render();}};

function updateMonthLabel(){
const parts=monthKey.split('-');
document.getElementById('monthLabel').textContent=new Date(parts[0],parts[1]-1).toLocaleString(undefined,{month:'long',year:'numeric'});
}
updateMonthLabel();(undefined,{month:'long',year:'numeric'});
setupWeekdays();loadTasks();render();
</script>
</body>
</html>
